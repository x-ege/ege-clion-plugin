<idea-plugin require-restart="false">
    <id>org.xege.creator</id>
    <name>Xege Creator</name>
    <!-- 版本号由 Gradle 构建时自动注入 -->
    <vendor email="this@xege.org" url="https://github.com/x-ege/ege-clion-plugin">wysaid</vendor>
    
    <!-- 国际化资源包 -->
    <resource-bundle>messages.XegeBundle</resource-bundle>
    
    <description>
        EGE (Easy Graphics Engine) plugin for CLion IDE, providing simple graphics programming support.
    </description>
    
    <!-- 兼容性范围: 从 CLion 2023.3 (233) 开始，向后持续兼容 -->
    <idea-version since-build="233"/>
    
    <!-- 更新日志由 Gradle 构建时从 CHANGELOG.md 注入 -->
    
    <depends>com.intellij.modules.platform</depends>
    <!-- CLion C/C++ 支持 - 必需依赖 -->
    <depends>com.intellij.clion</depends>

    <extensions defaultExtensionNs="com.intellij">
        <!-- 注册通知组 - 使用新的格式 -->
        <notificationGroup id="Xege Plugin Notifications" displayType="BALLOON" isLogByDefault="true"/>
        
        <!-- 注册 CLion 项目生成器 - 使用正确的扩展点 -->
        <directoryProjectGenerator implementation="org.xege.project.EgeProjectGenerator"/>
    </extensions>

    <actions>
        <!-- EGE 菜单组 - 在工具菜单中显示为带子菜单的选项 -->
        <group id="org.xege.EgeOptionsGroup" 
               class="org.xege.action.EgeOptionsGroup"
               popup="true">
            
            <!-- 创建 EGE 项目 Action -->
            <action id="org.xege.CreateEgeProjectAction"
                    class="org.xege.project.CreateEgeProjectAction"/>
            
            <separator/>

            <action id="org.xege.SetupAsEgeProjectAction"
                    class="org.xege.project.SetupAsEgeProjectAction"/>
            
            <separator/>
            
            <!-- 帮助/关于 Action -->
            <action id="org.xege.HelpAction"
                    class="org.xege.HelpAction"/>
            
            <separator/>
            
            <!-- 这里可以添加更多 Action -->
            <!-- 例如：
            <action id="org.xege.SettingsAction"
                    class="org.xege.SettingsAction"
                    text="插件设置"
                    description="配置 EGE 插件选项"/>
            
            <action id="org.xege.DocumentationAction"
                    class="org.xege.DocumentationAction"
                    text="在线文档"
                    description="打开 EGE 在线文档"/>
            -->
            
            <!-- 添加到工具菜单 -->
            <add-to-group group-id="ToolsMenu" anchor="first"/>
        </group>
    </actions>
</idea-plugin>
